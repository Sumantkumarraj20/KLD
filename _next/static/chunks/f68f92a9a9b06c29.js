(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7045,e=>{"use strict";var t=e.i(7289);class a{static DEFAULT_EASE_FACTOR=2.5;static MIN_INTERVAL=1;static calculateNextInterval(e,t=0,a=this.DEFAULT_EASE_FACTOR){let l,s=Math.max(0,Math.min(5,Math.round(e)));if(s<3)return{interval:this.MIN_INTERVAL,easeFactor:this.DEFAULT_EASE_FACTOR};let r=Math.max(1.3,a+.1-(5-s)*(.08+(5-s)*.02));return l=0===t?1:1===t?3:Math.ceil(t*r),{interval:Math.max(this.MIN_INTERVAL,l),easeFactor:r}}static createCompletion(e,t,a){let l=new Date,s=new Date(l.getTime()+864e5),r=Math.max(0,Math.min(5,a));return{domain:e,levelNumber:t,completedAt:l.toISOString(),starsEarned:a,quality:r,repetitions:1,interval:1,easeFactor:this.DEFAULT_EASE_FACTOR,nextReviewAt:s.toISOString()}}static reviewCompletion(e,t){let{interval:a,easeFactor:l}=this.calculateNextInterval(t,e.interval,e.easeFactor),s=new Date;return s.setDate(s.getDate()+a),{...e,starsEarned:Math.max(e.starsEarned,Math.round(t)),repetitions:e.repetitions+1,interval:a,easeFactor:l,nextReviewAt:s.toISOString()}}static getLockStatus(e){if(!e||!e.nextReviewAt)return{isLocked:!1};let t=new Date(e.nextReviewAt),a=new Date;if(a>=t)return{isLocked:!1};let l=t.getTime()-a.getTime(),s=Math.floor(l/864e5),r=Math.floor(l%864e5/36e5),o=Math.floor(l%36e5/6e4);return{isLocked:!0,nextUnlockAt:t.toISOString(),daysUntilUnlock:s,hoursUntilUnlock:r,minutesUntilUnlock:o}}static formatTimeUntilUnlock(e){return e.isLocked?e.daysUntilUnlock||e.hoursUntilUnlock?e.daysUntilUnlock?`${e.daysUntilUnlock}d ${e.hoursUntilUnlock}h`:`${e.hoursUntilUnlock}h ${e.minutesUntilUnlock}m`:`${e.minutesUntilUnlock} min`:""}static resetLevel(e){return{...e,nextReviewAt:new Date().toISOString()}}}let l=new class{async submitLevelCompletion(e,l,s,r,o){try{let i=this.getDomainDisplayName(l),n=`${i} Level ${s} (${r}★)`,c=`${l}-level-${s}`,m=a.createCompletion(l,s,r);this.storeLevelCompletion(e,c,m);let g=!1;for(let a=0;a<3;a++)try{await t.api.awardPoints(e,o,n,"game-engine"),g=!0,console.log(`✅ Level completion (${n}) synced to backend on attempt ${a+1}`);break}catch(e){console.warn(`API sync attempt ${a+1}/3 failed for level completion:`,e),a<2&&await new Promise(e=>setTimeout(e,500*(a+1)))}g||console.warn(`Failed to sync level completion after 3 attempts - ${o} points will sync when connection restored`);let h={award_id:`award-${e}-${l}-level-${s}-${Date.now()}`,kid_id:e,level_id:`${l}-level-${s}`,domain:l,level_number:s,stars_earned:r,points_awarded:o,completed_at:new Date().toISOString(),reason:n};return this.cacheGameProgress(e,h),h}catch(e){throw console.error("Failed to submit level completion:",e),e}}async getKidGameProgress(e){try{let t=this.getLocalGameProgress(e);return{language_level:t.language||1,mathematics_level:t.mathematics||1,logical_level:t.logical||1,total_stars:t.total_stars||0}}catch(e){return console.error("Failed to get kid game progress:",e),{language_level:1,mathematics_level:1,logical_level:1,total_stars:0}}}getLocalGameProgress(e){let t=`game-progress-${e}`,a=localStorage.getItem(t);if(a)try{return JSON.parse(a)}catch{}return this.initializeGameProgress()}initializeGameProgress(){return{language:1,mathematics:1,logical:1,total_stars:0,last_session:null,completed_levels:{}}}cacheGameProgress(e,t){let a=`game-progress-${e}`,l=this.getLocalGameProgress(e),s=t.domain;t.level_number>(l[s]||0)&&(l[t.domain]=t.level_number),l.total_stars=(l.total_stars||0)+t.stars_earned,l.completed_levels[t.level_id]=Math.max(l.completed_levels[t.level_id]||0,t.stars_earned),l.last_session=t.completed_at,localStorage.setItem(a,JSON.stringify(l))}getKidSessions(e){let t=`game-sessions-${e}`,a=localStorage.getItem(t);if(a)try{return JSON.parse(a)}catch{}return[]}storeSession(e,t){let a=`game-sessions-${e}`,l=this.getKidSessions(e);l.push(t),l.length>100&&l.shift(),localStorage.setItem(a,JSON.stringify(l))}getLevelStars(e,t){return this.getLocalGameProgress(e).completed_levels[t]||0}isLevelUnlocked(e,t,a){if(1===a)return!0;let l=this.getLocalGameProgress(e),s=`${t}-level-${a-1}`;return(l.completed_levels[s]||0)>=3}getMaxUnlockedLevel(e,t){let a=this.getLocalGameProgress(e),l=1;for(let e=1;e<=50;e++){let s=`${t}-level-${e}`;if((a.completed_levels[s]||0)>=3)l=e;else if(1===e)break}return l}getDomainStars(e,t){return this.getKidSessions(e).filter(e=>e.domain===t).reduce((e,t)=>e+t.stars_earned,0)}exportGameProgress(e){let t=this.getLocalGameProgress(e),a=this.getKidSessions(e);return{kid_id:e,export_date:new Date().toISOString(),progress:t,sessions_count:a.length,domain_stats:{language:this.getDomainStars(e,"language"),mathematics:this.getDomainStars(e,"mathematics"),logical:this.getDomainStars(e,"logical")}}}clearGameProgress(e){localStorage.removeItem(`game-progress-${e}`),localStorage.removeItem(`game-sessions-${e}`),localStorage.removeItem(`level-completions-${e}`)}getDomainDisplayName(e){return({language:"Language",mathematics:"Mathematics",logical:"Logical"})[e]||e}storeLevelCompletion(e,t,a){let l=`level-completions-${e}`,s=localStorage.getItem(l),r=s?JSON.parse(s):{};r[t]=a,localStorage.setItem(l,JSON.stringify(r))}getLevelCompletion(e,t,a){let l=`level-completions-${e}`,s=localStorage.getItem(l);return s?JSON.parse(s)[`${t}-level-${a}`]||null:null}getLevelLockStatus(e,t,l){let s=this.getLevelCompletion(e,t,l);return a.getLockStatus(s??void 0)}canPlayLevel(e,t,a){return!this.getLevelLockStatus(e,t,a).isLocked}getTimeUntilUnlock(e,t,l){let s=this.getLevelLockStatus(e,t,l);return a.formatTimeUntilUnlock(s)}resetLevelLock(e,t,l){let s=this.getLevelCompletion(e,t,l);if(s){let r=a.resetLevel(s),o=`${t}-level-${l}`;this.storeLevelCompletion(e,o,r)}}};e.s(["gameAPI",0,l],7045)},6043,e=>{"use strict";let t=(0,e.i(9547).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],6043)},5707,e=>{"use strict";let t=(0,e.i(9547).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],5707)},6408,e=>{"use strict";let t=(0,e.i(9547).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],6408)},3299,6122,e=>{"use strict";var t=e.i(9547);let a=(0,t.default)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]);e.s(["Trophy",()=>a],3299);let l=(0,t.default)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);e.s(["Award",()=>l],6122)},8478,e=>{"use strict";let t=(0,e.i(9547).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],8478)},8761,e=>{e.v(t=>Promise.all(["static/chunks/66b8f93dfb02a11d.js"].map(t=>e.l(t))).then(()=>t(3594)))},8805,e=>{e.v(t=>Promise.all(["static/chunks/5ec9ab7aae3f3e76.js"].map(t=>e.l(t))).then(()=>t(9466)))}]);